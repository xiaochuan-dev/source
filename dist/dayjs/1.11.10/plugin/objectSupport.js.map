{"version":3,"file":"objectSupport.js","sources":["../src/plugin/objectSupport/index.js"],"sourcesContent":["export default (o, c, dayjs) => {\n  const proto = c.prototype\n  const isObject = obj => obj !== null && !(obj instanceof Date) && !(obj instanceof Array)\n        && !proto.$utils().u(obj) && (obj.constructor.name === 'Object')\n  const prettyUnit = (u) => {\n    const unit = proto.$utils().p(u)\n    return unit === 'date' ? 'day' : unit\n  }\n  const parseDate = (cfg) => {\n    const { date, utc } = cfg\n    const $d = {}\n    if (isObject(date)) {\n      if (!Object.keys(date).length) {\n        return new Date()\n      }\n      const now = utc ? dayjs.utc() : dayjs()\n      Object.keys(date).forEach((k) => {\n        $d[prettyUnit(k)] = date[k]\n      })\n      const d = $d.day || ((!$d.year && !($d.month >= 0)) ? now.date() : 1)\n      const y = $d.year || now.year()\n      const M = $d.month >= 0 ? $d.month : ((!$d.year && !$d.day) ? now.month() : 0)// eslint-disable-line no-nested-ternary,max-len\n      const h = $d.hour || 0\n      const m = $d.minute || 0\n      const s = $d.second || 0\n      const ms = $d.millisecond || 0\n      if (utc) {\n        return new Date(Date.UTC(y, M, d, h, m, s, ms))\n      }\n      return new Date(y, M, d, h, m, s, ms)\n    }\n    return date\n  }\n\n  const oldParse = proto.parse\n  proto.parse = function (cfg) {\n    cfg.date = parseDate.bind(this)(cfg)\n    oldParse.bind(this)(cfg)\n  }\n\n  const oldSet = proto.set\n  const oldAdd = proto.add\n  const oldSubtract = proto.subtract\n\n  const callObject = function (call, argument, string, offset = 1) {\n    const keys = Object.keys(argument)\n    let chain = this\n    keys.forEach((key) => {\n      chain = call.bind(chain)(argument[key] * offset, key)\n    })\n    return chain\n  }\n\n  proto.set = function (unit, value) {\n    value = value === undefined ? unit : value\n    if (unit.constructor.name === 'Object') {\n      return callObject.bind(this)(function (i, s) {\n        return oldSet.bind(this)(s, i)\n      }, value, unit)\n    }\n    return oldSet.bind(this)(unit, value)\n  }\n  proto.add = function (value, unit) {\n    if (value.constructor.name === 'Object') {\n      return callObject.bind(this)(oldAdd, value, unit)\n    }\n    return oldAdd.bind(this)(value, unit)\n  }\n  proto.subtract = function (value, unit) {\n    if (value.constructor.name === 'Object') {\n      return callObject.bind(this)(oldAdd, value, unit, -1)\n    }\n    return oldSubtract.bind(this)(value, unit)\n  }\n}\n"],"names":[],"mappings":"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"}