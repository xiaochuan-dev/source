{"version":3,"file":"relativeTime.js","sources":["../src/constant.js","../src/plugin/relativeTime/index.js"],"sourcesContent":["export const SECONDS_A_MINUTE = 60\nexport const SECONDS_A_HOUR = SECONDS_A_MINUTE * 60\nexport const SECONDS_A_DAY = SECONDS_A_HOUR * 24\nexport const SECONDS_A_WEEK = SECONDS_A_DAY * 7\n\nexport const MILLISECONDS_A_SECOND = 1e3\nexport const MILLISECONDS_A_MINUTE = SECONDS_A_MINUTE * MILLISECONDS_A_SECOND\nexport const MILLISECONDS_A_HOUR = SECONDS_A_HOUR * MILLISECONDS_A_SECOND\nexport const MILLISECONDS_A_DAY = SECONDS_A_DAY * MILLISECONDS_A_SECOND\nexport const MILLISECONDS_A_WEEK = SECONDS_A_WEEK * MILLISECONDS_A_SECOND\n\n// English locales\nexport const MS = 'millisecond'\nexport const S = 'second'\nexport const MIN = 'minute'\nexport const H = 'hour'\nexport const D = 'day'\nexport const W = 'week'\nexport const M = 'month'\nexport const Q = 'quarter'\nexport const Y = 'year'\nexport const DATE = 'date'\n\nexport const FORMAT_DEFAULT = 'YYYY-MM-DDTHH:mm:ssZ'\n\nexport const INVALID_DATE_STRING = 'Invalid Date'\n\n// regex\nexport const REGEX_PARSE = /^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/\nexport const REGEX_FORMAT = /\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g\n","import * as C from '../../constant'\n\nexport default (o, c, d) => {\n  o = o || {}\n  const proto = c.prototype\n  const relObj = {\n    future: 'in %s',\n    past: '%s ago',\n    s: 'a few seconds',\n    m: 'a minute',\n    mm: '%d minutes',\n    h: 'an hour',\n    hh: '%d hours',\n    d: 'a day',\n    dd: '%d days',\n    M: 'a month',\n    MM: '%d months',\n    y: 'a year',\n    yy: '%d years'\n  }\n  d.en.relativeTime = relObj\n  proto.fromToBase = (input, withoutSuffix, instance, isFrom, postFormat) => {\n    const loc = instance.$locale().relativeTime || relObj\n    const T = o.thresholds || [\n      { l: 's', r: 44, d: C.S },\n      { l: 'm', r: 89 },\n      { l: 'mm', r: 44, d: C.MIN },\n      { l: 'h', r: 89 },\n      { l: 'hh', r: 21, d: C.H },\n      { l: 'd', r: 35 },\n      { l: 'dd', r: 25, d: C.D },\n      { l: 'M', r: 45 },\n      { l: 'MM', r: 10, d: C.M },\n      { l: 'y', r: 17 },\n      { l: 'yy', d: C.Y }\n    ]\n    const Tl = T.length\n    let result\n    let out\n    let isFuture\n\n    for (let i = 0; i < Tl; i += 1) {\n      let t = T[i]\n      if (t.d) {\n        result = isFrom\n          ? d(input).diff(instance, t.d, true)\n          : instance.diff(input, t.d, true)\n      }\n      let abs = (o.rounding || Math.round)(Math.abs(result))\n      isFuture = result > 0\n      if (abs <= t.r || !t.r) {\n        if (abs <= 1 && i > 0) t = T[i - 1] // 1 minutes -> a minute, 0 seconds -> 0 second\n        const format = loc[t.l]\n        if (postFormat) {\n          abs = postFormat(`${abs}`)\n        }\n        if (typeof format === 'string') {\n          out = format.replace('%d', abs)\n        } else {\n          out = format(abs, withoutSuffix, t.l, isFuture)\n        }\n        break\n      }\n    }\n    if (withoutSuffix) return out\n    const pastOrFuture = isFuture ? loc.future : loc.past\n    if (typeof pastOrFuture === 'function') {\n      return pastOrFuture(out)\n    }\n    return pastOrFuture.replace('%s', out)\n  }\n\n  function fromTo(input, withoutSuffix, instance, isFrom) {\n    return proto.fromToBase(input, withoutSuffix, instance, isFrom)\n  }\n\n  proto.to = function (input, withoutSuffix) {\n    return fromTo(input, withoutSuffix, this, true)\n  }\n  proto.from = function (input, withoutSuffix) {\n    return fromTo(input, withoutSuffix, this)\n  }\n\n  const makeNow = thisDay => (thisDay.$u ? d.utc() : d())\n\n  proto.toNow = function (withoutSuffix) {\n    return this.to(makeNow(this), withoutSuffix)\n  }\n  proto.fromNow = function (withoutSuffix) {\n    return this.from(makeNow(this), withoutSuffix)\n  }\n}\n"],"names":["C.S","C.MIN","C.H","C.D","C.M","C.Y"],"mappings":"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"}