stages:          # List of stages for jobs and their order of execution
  - publish

variables:
  NPM_AUTH_TOKEN: "${NPM_TOKEN}"

publish-job:
  stage: publish
  image: node
  only: [tags, web, master]
  script:
    - npm config set registry https://registry.npmjs.org/ --local
    - config set '//registry.npmjs.org/:_authToken' $NPM_AUTH_TOKEN
    - yarn publish --non-interactive